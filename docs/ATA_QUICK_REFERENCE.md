# ATA (Analog Telephone Adapter) Support - Quick Reference

## What is ATA Support?

ATA support allows you to connect traditional analog phones and fax machines to your modern VoIP PBX system.

## Supported Devices

| Vendor | Model | Ports | Features |
|--------|-------|-------|----------|
| Grandstream | HT801 | 1 FXS | Basic analog adapter |
| Grandstream | HT802 | 2 FXS | Dual analog lines |
| Cisco | SPA112 | 2 FXS | Dual analog lines |
| Cisco | SPA122 | 2 FXS + Router | Dual lines + integrated router |
| Cisco | ATA 191 | 2 FXS | Enterprise with PoE support |
| Cisco | ATA 192 | 2 FXS | Multiplatform enterprise |

## Quick Setup (5 Minutes)

### 1. Connect Hardware
- Plug ATA into network (Ethernet)
- Connect analog phone to FXS port
- Power on

### 2. Register in PBX
```bash
# Via API
curl -X POST http://your-pbx:8080/api/provisioning/devices \
  -H "Content-Type: application/json" \
  -d '{
    "mac_address": "000b82123456",
    "extension_number": "1001",
    "vendor": "grandstream",
    "model": "ht801"
  }'
```

Or use Admin Panel ‚Üí Phone Provisioning ‚Üí Register New Device

### 3. Configure ATA
Access ATA web interface (usually http://192.168.0.1):
- Set Config Server Path: `http://your-pbx:8080/provision/000b82123456.cfg`
- Save and reboot

### 4. Test
- Pick up phone ‚Üí Should hear dial tone
- Dial another extension
- Done! üéâ

## Common Use Cases

### Analog Phone
Connect any traditional phone to VoIP system. Works like any extension with all PBX features.

### Fax Machine
- T.38 protocol enabled automatically
- Use G.711 codec (PCMU/PCMA)
- Disable call waiting on fax extension
- Test with short fax first

### Paging System
Connect overhead paging amplifier for warehouse/facility announcements. See [Paging System](FEATURES.md#paging-system).

### Legacy Equipment
Keep using old but functional analog devices while migrating to VoIP.

## Key Features

‚úÖ **Auto-Provisioning** - Zero-touch setup like IP phones
‚úÖ **T.38 Fax** - Fax over IP support
‚úÖ **Echo Cancellation** - Optimized for analog audio
‚úÖ **DTMF Support** - Works with IVR/voicemail
‚úÖ **Caller ID** - Display on analog phones
‚úÖ **G.711 Codecs** - Best quality for analog

## Troubleshooting

### No Dial Tone
1. Check physical connections
2. Verify ATA is powered on
3. Check registration status in admin panel
4. Review PBX logs

### DTMF Not Working
1. Set DTMF to SIP INFO (Grandstream: P79=2)
2. Try RFC2833 as alternative
3. Check payload type (101)

### Poor Audio Quality
1. Enable echo cancellation (enabled by default)
2. Check network quality
3. Adjust gain settings
4. Use G.711 codec

### Fax Fails
1. Verify T.38 enabled
2. Use G.711 codec only
3. Reduce fax speed to 9600 baud
4. Test with simple 1-page fax

## Configuration Files

All templates are in `provisioning_templates/`:
- `grandstream_ht801.template` - Single port ATA
- `grandstream_ht802.template` - Dual port ATA
- `cisco_spa112.template` - Cisco dual port
- `cisco_spa122.template` - Cisco with router

## Documentation

üìñ **Complete Guide**: [docs/ATA_SUPPORT_GUIDE.md](ATA_SUPPORT_GUIDE.md) - Comprehensive setup and troubleshooting

üìñ **Phone Provisioning**: [PHONE_PROVISIONING.md](../PHONE_PROVISIONING.md) - General provisioning guide

üìñ **Features**: [FEATURES.md](../FEATURES.md) - All PBX features

## API Reference

### Register Device
```bash
POST /api/provisioning/devices
{
  "mac_address": "000b82123456",
  "extension_number": "1001",
  "vendor": "grandstream",
  "model": "ht801"
}
```

### Get Config File
```bash
GET /api/provision/000b82123456.cfg
```

### List Devices
```bash
GET /api/provisioning/devices
```

## Best Practices

1. ‚úÖ Use dedicated extension for fax machines
2. ‚úÖ Label physical devices with extension numbers
3. ‚úÖ Change default ATA admin passwords
4. ‚úÖ Test thoroughly before production deployment
5. ‚úÖ Keep ATA firmware updated
6. ‚úÖ Monitor call quality with QoS metrics

## Security

- Strong SIP passwords (auto-generated by PBX)
- Change default ATA web passwords
- Disable auto-provisioning after setup
- Restrict web interface access with firewall
- Keep firmware current

## Support

- üìù Documentation: [docs/ATA_SUPPORT_GUIDE.md](ATA_SUPPORT_GUIDE.md)
- üîß Troubleshooting: [TROUBLESHOOTING.md](../TROUBLESHOOTING.md)
- üêõ Issues: GitHub Issues
- üìß Questions: Project discussions

---

**Last Updated**: December 29, 2025
**Version**: 1.0.0
