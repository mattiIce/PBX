# Core dependencies for PBX system
PyYAML>=6.0.3  # Updated to latest stable version

# FIPS-compliant encryption (Required for FIPS mode)
cryptography>=46.0.5  # Updated to latest stable version with security fixes

# Production SIP/RTP support (FREE, open source)
aiortc>=1.14.0  # WebRTC support (browser-based calling)
twisted>=25.5.0  # Async networking (SIP protocol handling)

# Enhanced audio processing (FREE, open source)
pydub>=0.25.1  # Audio manipulation
sounddevice>=0.5.5  # Audio I/O

# Voice prompt generation (FREE, open source)
# System packages: sudo apt-get install espeak ffmpeg
gTTS>=2.5.4  # Google Text-to-Speech (FREE, requires internet)
pyttsx3>=2.99  # Offline TTS (uses espeak)

# Database backend (FREE, open source)
sqlalchemy>=2.0.46  # ORM
psycopg2-binary>=2.9.11  # PostgreSQL adapter for Python
alembic>=1.18  # Database migrations

# For enterprise integrations (Teams, Outlook, Zoom):
# Note: requests version compatible with current docker-compose
# See: https://github.com/docker/docker-py/issues/3256
requests>=2.32.5
msal>=1.34.0  # Microsoft Authentication Library

# For FIDO2/WebAuthn authentication
fido2>=2.1.1  # FIDO2/WebAuthn library for hardware security keys

# Audio Codec Support
# Opus codec - Modern, high-quality, low-latency audio codec
opuslib>=3.0.1  # Python bindings for Opus codec (requires libopus system library)

# iLBC codec - Internet Low Bitrate Codec with packet loss concealment
# NOTE: pyilbc is not currently available on PyPI. The iLBC codec framework is
# implemented and will work for SDP negotiation, but actual encoding/decoding
# requires a compatible library. The codec gracefully handles the missing library.
# pyilbc>=1.0.0  # iLBC codec support (NOT AVAILABLE ON PyPI)

# Speex codec - Open source speech codec from Xiph.Org
# NOTE: speex requires system libraries (libspeex-dev) to build. The Speex codec
# framework is implemented and will work for SDP negotiation, but actual encoding/
# decoding requires the speex library and system dependencies. The codec gracefully
# handles the missing library.
# To install: First run 'sudo apt-get install libspeex-dev', then 'pip install speex>=0.9.1'
# speex>=0.9.1  # Speex codec support (requires libspeex-dev system library)

# === FREE & OPEN-SOURCE AI/ML INTEGRATION ===

# Speech Recognition (FREE, offline)
vosk>=0.3.45  # Offline speech-to-text for voicemail transcription

# Natural Language Processing (FREE, open source)
spacy>=3.8.11  # Industrial-strength NLP for entity extraction, sentiment analysis
# Download model: python -m spacy download en_core_web_sm
nltk>=3.9.2  # Natural language toolkit for tokenization, lemmatization, intent detection
# NLTK will auto-download required corpora on first use

# Machine Learning (FREE, open source)
numpy>=2.4.2,<2.5  # Array operations and numerical computing (constrained by librosa)
scikit-learn>=1.8.0  # ML algorithms (classification, regression, clustering)
scipy>=1.17.0  # Scientific computing and optimization

# Audio Analysis (FREE, open source) - for voice biometrics
pyAudioAnalysis>=0.3.14  # Audio feature extraction, speaker recognition, AMD
# Requires: sudo apt-get install python3-tk portaudio19-dev
librosa>=0.11.0  # Audio analysis and feature extraction
soundfile>=0.13.1  # Audio file I/O

# Video Codec Support (FREE, open source) - requires FFmpeg
# System package: sudo apt-get install ffmpeg
imageio-ffmpeg>=0.6.0  # FFmpeg wrapper for Python
av>=16.1.0  # PyAV - Pythonic binding for FFmpeg

# Data validation (FREE, open source)
pydantic>=2.12  # Data validation and settings management

# Web interface (FREE, open source)
flask>=3.1.2  # Web framework
werkzeug>=3.1.5  # Web framework utilities (Flask dependency) - security updates
jinja2>=3.1.6  # Template engine (Flask dependency) - security fixes
websockets>=16.0  # Real-time updates (already installed by vosk)

# Monitoring (FREE, open source)
prometheus-client>=0.24.1  # Metrics collection
redis>=7.2.0  # Caching/queues
psutil>=7.2.2  # System and process monitoring
