# ============================================================================
# Warden VoIP PBX â€” Startup Tests Service File (TEMPLATE)
# ============================================================================
# This file contains PLACEHOLDER paths (/opt/pbx).  Do NOT copy it directly
# to /etc/systemd/system/.  Instead, generate service files with the correct
# paths for your installation:
#
#   make install-service                                  # recommended
#   sudo python3 scripts/generate_service.py --install    # alternative
# ============================================================================

[Unit]
Description=Warden VoIP System Startup Tests
After=network.target pbx.service

[Service]
Type=oneshot
# IMPORTANT: Update these paths to match your PBX installation directory
# Or use: make install-service (does this automatically)
WorkingDirectory=/opt/pbx
ExecStart=/opt/pbx/run_startup_tests.sh
# IMPORTANT: Update this to the user who owns the PBX files
User=root
Group=root
StandardOutput=journal
StandardError=journal
# Don't fail the boot if tests fail (exit codes 0 and 1 are both success)
SuccessExitStatus=0 1

[Install]
WantedBy=multi-user.target
