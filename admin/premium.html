<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Premium Features - PBX Admin</title>
    <link rel="stylesheet" href="css/admin.css">
    <style>
        .premium-banner {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 2rem;
            border-radius: 8px;
            margin-bottom: 2rem;
            text-align: center;
        }
        
        .premium-banner h1 {
            margin: 0 0 0.5rem 0;
            font-size: 2rem;
        }
        
        .premium-banner p {
            margin: 0;
            font-size: 1.1rem;
            opacity: 0.9;
        }
        
        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            margin: 2rem 0;
        }
        
        .feature-card {
            background: white;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            padding: 1.5rem;
            transition: transform 0.2s, box-shadow 0.2s;
        }
        
        .feature-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        
        .feature-card.locked {
            opacity: 0.7;
            background: #f9f9f9;
        }
        
        .feature-icon {
            font-size: 2.5rem;
            margin-bottom: 1rem;
        }
        
        .feature-title {
            font-size: 1.3rem;
            font-weight: bold;
            margin-bottom: 0.5rem;
            color: #333;
        }
        
        .feature-description {
            color: #666;
            margin-bottom: 1rem;
            line-height: 1.6;
        }
        
        .feature-badge {
            display: inline-block;
            padding: 0.25rem 0.75rem;
            border-radius: 12px;
            font-size: 0.85rem;
            font-weight: bold;
            margin-bottom: 0.5rem;
        }
        
        .badge-available {
            background: #d4edda;
            color: #155724;
        }
        
        .badge-premium {
            background: #fff3cd;
            color: #856404;
        }
        
        .badge-enterprise {
            background: #d1ecf1;
            color: #0c5460;
        }
        
        .badge-locked {
            background: #f8d7da;
            color: #721c24;
        }
        
        .tier-info {
            background: #f8f9fa;
            padding: 1.5rem;
            border-radius: 8px;
            margin-bottom: 2rem;
        }
        
        .tier-name {
            font-size: 1.5rem;
            font-weight: bold;
            color: #667eea;
            margin-bottom: 0.5rem;
        }
        
        .tier-details {
            color: #666;
        }
        
        .upgrade-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 0.75rem 2rem;
            border-radius: 4px;
            font-size: 1rem;
            cursor: pointer;
            transition: opacity 0.2s;
        }
        
        .upgrade-btn:hover {
            opacity: 0.9;
        }
        
        .analytics-preview {
            background: white;
            padding: 1.5rem;
            border-radius: 8px;
            border: 1px solid #e0e0e0;
            margin: 2rem 0;
        }
        
        .chart-placeholder {
            background: #f5f5f5;
            height: 200px;
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #999;
            font-size: 1.2rem;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üîä PBX Premium Features</h1>
            <div class="status-bar">
                <a href="index.html" class="btn btn-secondary">‚Üê Back to Dashboard</a>
            </div>
        </header>

        <div class="premium-banner">
            <h1>‚ú® Unlock Enterprise-Grade Features</h1>
            <p>Enhance your PBX with advanced analytics, AI-powered routing, and comprehensive integrations</p>
        </div>

        <div class="tier-info">
            <div class="tier-name" id="current-tier">Loading...</div>
            <div class="tier-details" id="tier-details">Loading license information...</div>
            <button class="upgrade-btn" onclick="showUpgradeInfo()">Upgrade License</button>
        </div>

        <h2>Available Features</h2>
        
        <div class="features-grid" id="features-grid">
            <!-- Features will be populated by JavaScript -->
        </div>

        <div class="analytics-preview" id="analytics-section" style="display: none;">
            <h3>üìä Advanced Analytics Dashboard</h3>
            <p>Real-time insights into your call center performance</p>
            <div class="chart-placeholder">
                Interactive charts and graphs will display here
            </div>
        </div>
    </div>

    <script>
        const API_BASE = window.location.origin + '/api';
        
        const features = [
            {
                icon: 'üìä',
                title: 'Advanced Analytics',
                description: 'Comprehensive call analytics with historical reporting, heat maps, and predictive insights. Track performance metrics and generate custom reports.',
                tier: 'basic',
                flag: 'advanced_analytics'
            },
            {
                icon: 'üëÅÔ∏è',
                title: 'Supervisor Dashboard',
                description: 'Real-time monitoring of agent activity, queue statistics, and live call monitoring with whisper mode and barge-in capabilities.',
                tier: 'professional',
                flag: 'supervisor_dashboard'
            },
            {
                icon: 'üé§',
                title: 'Voicemail Transcription',
                description: 'Automatic speech-to-text conversion of voicemails with multi-language support and searchable transcripts.',
                tier: 'professional',
                flag: 'voicemail_transcription'
            },
            {
                icon: 'ü§ñ',
                title: 'AI-Powered Routing',
                description: 'Intelligent call routing based on intent recognition, customer sentiment, and predictive analytics for optimal call distribution.',
                tier: 'enterprise',
                flag: 'ai_routing'
            },
            {
                icon: 'üì±',
                title: 'SMS Integration',
                description: 'Two-way SMS messaging, automated notifications for missed calls, and SMS campaigns integrated with your phone system.',
                tier: 'professional',
                flag: 'sms_integration'
            },
            {
                icon: 'üîó',
                title: 'CRM Integration',
                description: 'Seamless integration with Salesforce, HubSpot, and other CRM systems. Screen pop, click-to-dial, and automatic call logging.',
                tier: 'enterprise',
                flag: 'crm_integration'
            },
            {
                icon: 'üéØ',
                title: 'Advanced IVR Builder',
                description: 'Visual drag-and-drop IVR designer with speech recognition, dynamic content, and multi-level menu support.',
                tier: 'professional',
                flag: 'advanced_ivr'
            },
            {
                icon: 'üìπ',
                title: 'Video Conferencing',
                description: 'HD video calls with screen sharing, recording, and up to 100 participants. Perfect for remote teams.',
                tier: 'enterprise',
                flag: 'video_conferencing'
            },
            {
                icon: 'üîí',
                title: 'Advanced Security',
                description: 'Enhanced security with 2FA, SSO integration, fraud detection, and compliance tools for PCI-DSS, HIPAA, and GDPR.',
                tier: 'professional',
                flag: 'advanced_security'
            },
            {
                icon: 'üíæ',
                title: 'Tiered Storage',
                description: 'Automatic storage tier management for recordings with hot, warm, and cold storage options. Reduce costs and optimize performance.',
                tier: 'professional',
                flag: 'tiered_storage'
            },
            {
                icon: 'üìà',
                title: 'Call Quality Metrics',
                description: 'Monitor jitter, latency, packet loss, and MOS scores. Real-time alerts for quality issues and network diagnostics.',
                tier: 'professional',
                flag: 'call_quality_metrics'
            },
            {
                icon: 'üèÜ',
                title: 'Agent Performance',
                description: 'Track individual agent metrics, gamification with leaderboards, and performance-based rewards. Boost team productivity.',
                tier: 'professional',
                flag: 'agent_performance'
            }
        ];
        
        async function loadLicenseInfo() {
            try {
                const response = await fetch(`${API_BASE}/license`);
                const data = await response.json();
                
                const tierElement = document.getElementById('current-tier');
                const detailsElement = document.getElementById('tier-details');
                
                tierElement.textContent = `Current License: ${data.tier.toUpperCase()}`;
                
                const valid = data.valid ? '‚úÖ Active' : '‚ö†Ô∏è Expired';
                detailsElement.innerHTML = `
                    Status: ${valid}<br>
                    Organization: ${data.organization || 'Not Set'}<br>
                    Expires: ${data.expiry_date ? new Date(data.expiry_date).toLocaleDateString() : 'N/A'}
                `;
                
                // Show available features
                displayFeatures(data.tier, data.features);
                
                // Show analytics if available
                if (data.features.includes('advanced_analytics')) {
                    document.getElementById('analytics-section').style.display = 'block';
                }
            } catch (error) {
                console.error('Error loading license:', error);
                document.getElementById('current-tier').textContent = 'License: FREE';
                document.getElementById('tier-details').textContent = 'Limited features available';
                displayFeatures('free', []);
            }
        }
        
        function displayFeatures(currentTier, availableFeatures) {
            const grid = document.getElementById('features-grid');
            grid.innerHTML = '';
            
            const tierOrder = ['free', 'basic', 'professional', 'enterprise'];
            const currentTierIndex = tierOrder.indexOf(currentTier);
            
            features.forEach(feature => {
                const featureTierIndex = tierOrder.indexOf(feature.tier);
                const isAvailable = currentTierIndex >= featureTierIndex || 
                                   availableFeatures.includes(feature.flag);
                
                const card = document.createElement('div');
                card.className = 'feature-card' + (isAvailable ? '' : ' locked');
                
                let badge = '';
                if (isAvailable) {
                    badge = '<span class="feature-badge badge-available">‚úì Available</span>';
                } else if (feature.tier === 'basic') {
                    badge = '<span class="feature-badge badge-premium">Basic Tier</span>';
                } else if (feature.tier === 'professional') {
                    badge = '<span class="feature-badge badge-premium">Professional Tier</span>';
                } else if (feature.tier === 'enterprise') {
                    badge = '<span class="feature-badge badge-enterprise">Enterprise Tier</span>';
                }
                
                card.innerHTML = `
                    <div class="feature-icon">${feature.icon}</div>
                    ${badge}
                    <div class="feature-title">${feature.title}</div>
                    <div class="feature-description">${feature.description}</div>
                `;
                
                grid.appendChild(card);
            });
        }
        
        function showUpgradeInfo() {
            alert('Contact sales for license upgrade information:\n\nEmail: sales@pbx-system.com\nPhone: 1-800-PBX-HELP\n\nAvailable tiers:\n- Basic: $49/month\n- Professional: $99/month\n- Enterprise: Custom pricing');
        }
        
        // Load on page load
        document.addEventListener('DOMContentLoaded', loadLicenseInfo);
    </script>
</body>
</html>
